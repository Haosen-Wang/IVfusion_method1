# å†…å­˜ä¼˜åŒ–é…ç½®æ–‡ä»¶ - é€‚ç”¨äºå¤§æ¨¡å‹è®­ç»ƒ
data:
  d_data_dir: "/data/1024whs_data/DeMMI-RF/Train/degrad/Stripe/DroneRGBT"
  c_data_dir: "/data/1024whs_data/DeMMI-RF/Train/infrared/Stripe/DroneRGBT"
  mode: "L"

training:
  project_name: "Train_Memory_Optimized"
  batch_size: 1  # æœ€å°æ‰¹æ¬¡å¤§å°ä»¥èŠ‚çœæ˜¾å­˜
  num_epochs: 10
  resume_from_checkpoint: true

device:
  device_1: "cuda:0"
  device_2: "cuda:1"
  device_3: "cuda:2"

model:
  i_block_num: 2
  v_block_num: 2
  i_expert_num: 3
  v_expert_num: 3
  i_topk_expert: 2
  v_topk_expert: 2
  i_alpha: 1.0
  v_alpha: 1.0
  f_block_num: 3

# ğŸš€ å†…å­˜ä¼˜åŒ–é…ç½® - å‡å°‘æ˜¾å­˜å ç”¨çš„å…³é”®è®¾ç½®
memory:
  # æ£€æŸ¥ç‚¹åŠ è½½ä¼˜åŒ–
  checkpoint_memory_efficient: true  # å¯ç”¨å†…å­˜é«˜æ•ˆçš„æ£€æŸ¥ç‚¹åŠ è½½
  load_optimizer_state: false  # ğŸ’¡ è®¾ä¸ºfalseå¯å¤§å¹…å‡å°‘æ˜¾å­˜å ç”¨
  
  # æ£€æŸ¥ç‚¹ä¿å­˜ä¼˜åŒ–  
  compress_checkpoints: true  # å‹ç¼©ä¿å­˜ï¼Œå‡å°‘æ–‡ä»¶å¤§å°
  save_optimizer_in_epoch_checkpoints: false  # epochæ£€æŸ¥ç‚¹ä¸ä¿å­˜ä¼˜åŒ–å™¨çŠ¶æ€
  
# å®éªŒé…ç½® - ä¸åŒå†…å­˜éœ€æ±‚çš„å®éªŒè®¾ç½®
experiments:
  # æä½å†…å­˜æ¨¡å¼ - é€‚ç”¨äºæ˜¾å­˜ä¸è¶³çš„æƒ…å†µ
  ultra_low_memory:
    training:
      batch_size: 1
    memory:
      checkpoint_memory_efficient: true
      load_optimizer_state: false  # ä¸åŠ è½½ä¼˜åŒ–å™¨çŠ¶æ€
      compress_checkpoints: true
      save_optimizer_in_epoch_checkpoints: false
  
  # å¹³è¡¡æ¨¡å¼ - åœ¨æ€§èƒ½å’Œå†…å­˜é—´å¹³è¡¡
  balanced:
    training:
      batch_size: 2
    memory:
      checkpoint_memory_efficient: true
      load_optimizer_state: true  # åŠ è½½ä¼˜åŒ–å™¨çŠ¶æ€ä¿è¯è®­ç»ƒè¿ç»­æ€§
      compress_checkpoints: true
      save_optimizer_in_epoch_checkpoints: false
  
  # æ€§èƒ½ä¼˜å…ˆæ¨¡å¼ - é€‚ç”¨äºæ˜¾å­˜å……è¶³çš„æƒ…å†µ
  performance:
    training:
      batch_size: 4
    memory:
      checkpoint_memory_efficient: false  # ä½¿ç”¨æ ‡å‡†åŠ è½½æ–¹å¼
      load_optimizer_state: true
      compress_checkpoints: false
      save_optimizer_in_epoch_checkpoints: true
